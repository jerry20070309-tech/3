<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>TRIDENT V60 PRO</title>
<style>
body{
background:#000;
color:#0f0;
font-family:monospace;
padding:20px;
}
.card{
border:1px solid #222;
padding:15px;
margin-bottom:15px;
background:#0a0a0a;
}
.log{
position:fixed;
right:20px;
top:20px;
width:300px;
height:400px;
border:1px solid #333;
padding:10px;
overflow:auto;
background:#050505;
}
.bar{
height:5px;
background:#0f0;
margin-bottom:15px;
transition:width 1s linear;
}
input{
background:#111;
border:1px solid #333;
color:#0f0;
padding:5px;
margin-right:10px;
width:80px;
}
button{
background:#0f0;
color:#000;
border:none;
padding:8px 15px;
cursor:pointer;
}
.tag{
display:inline-block;
padding:2px 6px;
background:#111;
margin-right:5px;
margin-top:5px;
border:1px solid #333;
font-size:12px;
}
</style>
</head>
<body>

<h2>TRIDENT V60 PRO</h2>

ä¿è­‰é‡‘:
<input id="margin" value="100">
æ§“æ¡¿:
<input id="leverage" value="10">
<button onclick="start()">å•Ÿå‹•æƒæ</button>

<div class="bar" id="progress"></div>
<div id="list"></div>

<div class="log" id="log">
<b>Signal Log</b><br><br>
</div>

<script>

let prices={}
let alerted=new Set()
let universe=[]
let firstLoad=true

async function start(){
await loadUniverse()
scan()
setInterval(scan,30000)
setInterval(progressBar,1000)
}

function progressBar(){
let now=new Date().getSeconds()
document.getElementById("progress").style.width=(now/60*100)+"%"
}

async function loadUniverse(){
let res=await fetch("https://fapi.binance.com/fapi/v1/ticker/24hr")
let data=await res.json()

// å‰400éš»
universe=data
.filter(d=>d.symbol.endsWith("USDT"))
.sort((a,b)=>b.quoteVolume-a.quoteVolume)
.slice(0,400)
.map(d=>d.symbol)

connectWS()
}

function connectWS(){
let ws=new WebSocket("wss://fstream.binance.com/ws/!ticker@arr")
ws.onmessage=(e)=>{
let arr=JSON.parse(e.data)
arr.forEach(t=>{
if(universe.includes(t.s)){
prices[t.s]=parseFloat(t.c)
}
})
}
}

async function scan(){

let margin=parseFloat(document.getElementById("margin").value)
let leverage=parseFloat(document.getElementById("leverage").value)

let result=[]

for(let symbol of universe.slice(0,100)){

let k=await fetch(`https://fapi.binance.com/fapi/v1/klines?symbol=${symbol}&interval=15m&limit=50`).then(r=>r.json())

let closes=k.map(x=>parseFloat(x[4]))
let highs=k.map(x=>parseFloat(x[2]))
let lows=k.map(x=>parseFloat(x[3]))
let volumes=k.map(x=>parseFloat(x[5]))

let price=prices[symbol] || closes[closes.length-1]

let ema20=avg(closes.slice(-20))
let ema50=avg(closes.slice(-50))

let trend=ema20>ema50

let breakout=price>Math.max(...highs.slice(-20))

let atr=avg(highs.map((h,i)=>h-lows[i]))

let stop=Math.min(...lows.slice(-5))
let risk=price-stop

if(risk<=0)continue

let tp1=price+1.5*risk
let tp2=price+3*risk
let tp3=price+2.5*atr

let reward=tp2-price
let storm=reward/risk

let maxReturn=((tp2-price)/price)*leverage*100

let volumeSpike=volumes[volumes.length-1] > avg(volumes.slice(-20))*1.5

let score=0
if(trend)score+=20
if(breakout)score+=20
if(volumeSpike)score+=20
if(storm>=2.5)score+=20
if(price>ema20)score+=20

if(score>=80){

let position=margin*leverage

result.push({
symbol,
score,
price,
stop,
tp1,
tp2,
tp3,
storm,
maxReturn,
position,
margin
})

if(!alerted.has(symbol)){
logSignal(symbol,score)
alerted.add(symbol)
}

}

}

render(result.sort((a,b)=>b.score-a.score))
}

function render(data){
let html=""
data.forEach(d=>{
html+=`
<div class="card">
<b>${d.symbol}</b> | è©•åˆ†: ${d.score}<br><br>
Entry: ${d.price.toFixed(4)}<br>
Stop: ${d.stop.toFixed(4)}<br>
TP1: ${d.tp1.toFixed(4)}<br>
TP2: ${d.tp2.toFixed(4)}<br>
TP3: ${d.tp3.toFixed(4)}<br>
Stormæ¯”: ${d.storm.toFixed(2)}<br>
æœ€å¤§æ”¶ç›Šç‡: ${d.maxReturn.toFixed(2)}%<br>
å¯é–‹å€‰ä½: ${d.position.toFixed(2)}<br>
ä¿è­‰é‡‘: ${d.margin}<br>
</div>
`
})
document.getElementById("list").innerHTML=html
}

function logSignal(s,score){
let log=document.getElementById("log")
log.innerHTML+="ğŸ”¥ STRONG ENTRY "+s+" åˆ†æ•¸:"+score+"<br>"
}

function avg(arr){
return arr.reduce((a,b)=>a+b,0)/arr.length
}

</script>
</body>
</html>
