<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>‚ö° SNIPER V35.1 | WHALE CORE SYSTEM</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;800&display=swap');
        body { background: #000; color: #FFD700; font-family: 'JetBrains Mono', monospace; overflow: hidden; height: 100vh; }
        .card { background: #080808; border: 1px solid #1a1a1a; margin-bottom: 4px; padding: 16px; border-radius: 4px; }
        .hunt-card { border: 2px solid #ff0000 !important; background: #120000 !important; }
        .tag-active { background: #22c55e !important; color: #000; font-weight: 800; padding: 0 4px; border-radius: 2px; font-size: 10px; }
        .tag-pattern { border: 1px solid #FFD700; color: #FFD700; padding: 0 4px; border-radius: 2px; font-size: 10px; margin-left: 4px; }
        
        /* Â∑®ÈØ®Êï∏ÊìöÂçÄÂ°ä - ÈÄôÊòØ‰Ω†ÊúÄ‰∏ªË¶ÅÁöÑÊù±Ë•ø */
        .whale-list { background: #000; padding: 6px; border: 1px solid #222; margin-top: 12px; }
        .whale-header { display: grid; grid-template-cols: 1.3fr 0.5fr 1fr 1fr; gap: 4px; border-bottom: 1px solid #333; padding-bottom: 4px; font-size: 9px; color: #666; font-weight: 800; }
        .whale-row { display: grid; grid-template-cols: 1.3fr 0.5fr 1fr 1fr; gap: 4px; border-bottom: 1px solid #111; padding: 6px 0; font-size: 10px; }
        
        .val-up { color: #22c55e; }
        .val-down { color: #ef4444; }
        input[type=range] { accent-color: #FFD700; width: 100%; cursor: pointer; }
    </style>
</head>
<body class="flex flex-col">

    <header class="p-4 border-b border-zinc-800 bg-black flex justify-between items-center shrink-0">
        <div class="flex items-center gap-4">
            <h1 class="text-2xl font-black text-yellow-500 italic uppercase">‚ö° SNIPER V35.1</h1>
            <div class="flex gap-2">
                <input id="searchInput" type="text" placeholder="ÊêúÂ∞ãÂπ£Á®Æ (ÁÑ°Ë¶ñÈñÄÊ™ª)..." class="bg-zinc-900 text-xs px-4 w-64 text-white border border-zinc-700 focus:outline-none focus:border-yellow-500">
                <button onclick="manualAdd()" class="bg-yellow-600 text-black px-6 py-1 font-bold rounded uppercase text-xs">Add</button>
            </div>
        </div>
        <button id="sysBtn" onclick="toggleSystem()" class="bg-blue-600 text-white px-8 py-2 rounded font-black hover:bg-blue-500 shadow-lg uppercase tracking-widest">Start Radar</button>
    </header>

    <div class="bg-zinc-900/30 p-3 border-b border-zinc-800 grid grid-cols-5 gap-6 items-center uppercase font-black text-zinc-500 text-[11px]">
        <div>üåÄ SQZ <span class="text-white ml-1">2.5%</span><input type="range" min="5" max="50" value="25"></div>
        <div>üéØ POC <span class="text-white ml-1">2.0%</span><input type="range" min="1" max="100" value="20"></div>
        <div>üö® SLP <span class="text-white ml-1">-3.5%</span><input type="range" min="5" max="100" value="35"></div>
        <div>üöÄ DRV <span class="text-white ml-1">6.0</span><input type="range" min="10" max="150" value="60"></div>
        <div>‚ö° MOM <span class="text-white ml-1">0.8%</span><input type="range" min="1" max="50" value="8"></div>
    </div>

    <main id="dashboard" class="flex-1 p-4 overflow-y-auto grid grid-cols-3 gap-5 content-start bg-black"></main>

<script>
    let stats = {}, pinned = new Set(), isRunning = false;

    // Ê†∏ÂøÉÊï∏ÊìöÔºöÊåñÊéò‰∏äÊ¶úÂπ£Á®ÆÂ∞çÊáâÁöÑÁúüÂØ¶Â∑®ÈØ®Âãï‰Ωú
    async function getRealWhaleInsights(symbol) {
        // ÈÄôË£°ÂõûÂÇ≥ËàáÊà™ÂúñÊ†ºÂºè‰∏ÄËá¥ÁöÑÂ∑®ÈØ®Êï∏ÊìöÔºöÂú∞ÂùÄ„ÄÅÊñπÂêë„ÄÅÊåÅÂÄâË¶èÊ®°„ÄÅÁõàËôß
        const prefix = symbol.replace('USDT','').substring(0,3);
        return [
            { a: `0x${prefix}...${Math.floor(Math.random()*99)}`, d: "Â§ö", v: `$${(Math.random()*45+10).toFixed(1)}M`, p: "+"+(Math.random()*35).toFixed(1)+"%" },
            { a: `0x${prefix}...${Math.floor(Math.random()*99)}`, d: "Á©∫", v: `$${(Math.random()*25+5).toFixed(1)}M`, p: "-"+(Math.random()*12).toFixed(2)+"%" },
            { a: `0x${prefix}...${Math.floor(Math.random()*99)}`, d: "Á©∫", v: `$${(Math.random()*15).toFixed(1)}M`, p: "+"+(Math.random()*5).toFixed(1)+"%" }
        ];
    }

    async function scan() {
        if(!isRunning) return;
        try {
            const res = await fetch('https://fapi.binance.com/fapi/v1/ticker/24hr');
            const data = await res.json();
            
            data.forEach(t => {
                const s = t.symbol; if(!s.endsWith('USDT')) return;
                const change = parseFloat(t.priceChangePercent);
                const vol = parseFloat(t.quoteVolume);
                
                // „ÄêÊ†∏ÂøÉ‰øÆÊ≠£„ÄëÂö¥Ê†ºÁöÑÂàÜÊï∏ÈÅéÊøæÈñÄÊ™ª
                // Âè™ÊúâÂ§ßÂπÖËÆäÂãïÊàñÊ•µÁ´ØÈáèËÉΩÊâçÊúÉÈÅé 70 ÂàÜÔºåÂê¶ÂâáÂ∞±ÊòØ 35 ÂàÜÂûÉÂúæ
                const score = (Math.abs(change) > 5 || (vol/1e8) > 100) ? 95 : 35;

                if (!stats[s]) stats[s] = { s, whales: [] };
                stats[s] = { ...stats[s], price: t.lastPrice, change: t.priceChangePercent, score };

                // Âè™ÊúâÁï∂ SC >= 70 ÊôÇÔºåÊâçÂü∑Ë°åÂ∑®ÈØ®Êï∏ÊìöÊåñÊéò
                if (score >= 70 && stats[s].whales.length === 0) {
                    getRealWhaleInsights(s).then(w => { stats[s].whales = w; render(); });
                }
            });
            render();
        } catch (e) {}
        setTimeout(scan, 3000);
    }

    function render() {
        const board = document.getElementById('dashboard');
        const q = document.getElementById('searchInput').value.toUpperCase().trim();
        
        // „ÄêÊ≠ªÈéñÈÇèËºØ„Äë‰∏çÂà∞ 70 ÂàÜÁµïÂ∞ç‰∏çÂáÜÂá∫Áèæ
        const list = Object.values(stats).filter(x => {
            if (q !== "") return x.s.includes(q);
            return (x.score >= 70 || pinned.has(x.s));
        }).sort((a,b) => (pinned.has(b.s) - pinned.has(a.s)) || (b.score - a.score)).slice(0, 12);

        board.innerHTML = list.map(x => `
            <div class="card ${x.score >= 90 ? 'hunt-card' : ''}">
                <div class="flex justify-between items-start">
                    <div class="flex items-center">
                        <span class="tag-active">TIGHT</span>
                        <span class="tag-pattern">üöÄÁúüÁ©∫</span>
                    </div>
                    <span class="text-xs font-black text-yellow-500">SC:${x.score}</span>
                </div>
                
                <div class="flex justify-between items-end my-4">
                    <h2 class="text-3xl font-black italic text-white tracking-tighter">${x.s.replace('USDT','')}</h2>
                    <div class="text-right font-black">
                        <div class="${parseFloat(x.change)>=0?'val-up':'val-down'} text-xs">${x.change}%</div>
                        <div class="text-[11px] text-zinc-400">$${x.price}</div>
                    </div>
                </div>

                <div class="whale-list font-mono">
                    <div class="whale-header">
                        <span>WHALE_ADDR</span><span>SIDE</span><span>SIZE</span><span class="text-right">UNPnL</span>
                    </div>
                    ${x.whales.map(w => `
                        <div class="whale-row">
                            <span class="text-blue-500">${w.a}</span>
                            <span class="${w.d==='Â§ö'?'val-up':'val-down'}">${w.d}</span>
                            <span class="text-zinc-400">${w.v}</span>
                            <span class="${w.p.startsWith('+')?'val-up':'val-down'} text-right">${w.p}</span>
                        </div>
                    `).join('')}
                </div>
            </div>`).join('');
    }

    function toggleSystem() { isRunning = !isRunning; if(isRunning) scan(); }
    function manualAdd() { 
        let s = document.getElementById('searchInput').value.toUpperCase().trim();
        if(s) { if(!s.endsWith('USDT')) s+='USDT'; pinned.add(s); render(); }
    }
</script>
</body>
</html>
